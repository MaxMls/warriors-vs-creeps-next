import{_ as e,R as a}from"./request-error.8cc07275.js";import{A as o}from"./index.92c54a80.js";import{R as r}from"./common.44480256.js";import{d as s,J as m,K as t,L as l,u as n,v as u,O as i,r as c,o as f,E as v,w as d,e as p,t as _}from"./vendor.a60aa299.js";var b=s({components:{Form:e},setup(){const e=m(t(o)),s=l(),c=n({values:{name:"",room:""},errors:{name:null,room:null}});return u((()=>{let e=localStorage.getItem("name");c.value.values.name=e||""})),i(c.value.values,(()=>{localStorage.setItem("name",c.value.values.name)})),{form:c,fields:[{name:"name",label:"form.0"},{name:"room",label:"form.1"}],async submit(){var o,m;const{name:t}=c.value.values;if(t)if(t.length>25)c.value.errors.name="form.3";else try{const a=null!=(o=localStorage.getItem("skin"))?o:"ame";null==(m=e.room)||m.destroy(),e.room=new r,e.room.setCurrentPlayerData({skin:a,name:t}),await e.room.joinRoom(c.value.values.room),await s.push("/room")}catch(l){if(!(l instanceof a))throw l;c.value.errors=l.data}else c.value.errors.name="form.2"}}}});var g={ctn:"_ctn_1b45t_1",link:"_link_1b45t_7"};(b.__cssModules={}).cs=g,b.render=function(e,a,o,r,s,m){const t=c("Form");return f(),v(t,{fields:e.fields,modelValue:e.form,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form=a),onFormSubmit:e.submit},{title:d((()=>[p(_(e.$t("pages.join.3082")),1)])),next:d((()=>[p(_(e.$t("pages.join.4228")),1)])),_:1},8,["fields","modelValue","onFormSubmit"])};export{b as default};
