import{c as t,A as e}from"./index.b137bb54.js";import{d as s,J as l,K as a,L as o,u as n,M as u,x as i,N as r,C as y,r as d,o as p,c,a as m,n as _,t as b,F as k,j as C,k as g,H as I,b as v}from"./vendor.a60aa299.js";import{_ as x}from"./UnitComponent.f6127986.js";import{g as f}from"./common.44480256.js";import{c as S}from"./cloneDeep.3fdd3a58.js";import"./SvgIcon.85a6de8b.js";import"./vue-class-component.esm-bundler.47d45929.js";import"./types.69209817.js";var h,T,B={buttonsGroup:"_buttonsGroup_1muyx_1",ctn:"_ctn_1muyx_5",button:"_button_1muyx_1",buttonTop:"_buttonTop_1muyx_20",buttonsTop:"_buttonsTop_1muyx_27",slotsGroup:"_slotsGroup_1muyx_33",slotCtn:"_slotCtn_1muyx_42",skinSelectItemCtn:"_skinSelectItemCtn_1muyx_42",slotImage:"_slotImage_1muyx_52",skinSelectItem:"_skinSelectItem_1muyx_42",slotName:"_slotName_1muyx_59",slotKick:"_slotKick_1muyx_67",slotNameMe:"_slotNameMe_1muyx_71",buttonsBot:"_buttonsBot_1muyx_91",buttonStart:"_buttonStart_1muyx_96",buttonStart_ready:"_buttonStart_ready_1muyx_100",slotImage_ready:"_slotImage_ready_1muyx_100",popup:"_popup_1muyx_109",popupClose:"_popupClose_1muyx_121",skinSelectCtn:"_skinSelectCtn_1muyx_130",skinSelectTitle:"_skinSelectTitle_1muyx_138",skinSelectItems:"_skinSelectItems_1muyx_147"};(T=h||(h={}))[T.ame=0]="ame",T[T.cali=1]="cali",T[T.gura=2]="gura",T[T.ina=3]="ina",T[T.kiara=4]="kiara",T[T._length=5]="_length";const j=["ame","cali","gura","ina","kiara"],w=t=>{const e=n(null),s=y((()=>null!==e.value));return console.log({playerId:s.value}),{isOpen:s,open(t){e.value=t},close(){e.value=null},set(s){t.updatePlayerData(e.value,{skin:s}),e.value=null},values:j}};var $=s({inheritAttrs:!1,components:{UnitComponent:x},data:()=>({cs:t,style:B}),setup(){const t=l(a(e)),{room:s}=t,d=o(),p=n([]),c=n({selfId:"0",ownerId:"0",data:{}}),m=()=>{p.value=S(s.players),c.value=S(s.player),p.value.find((t=>!t.data.ready))||d.push("/game")};return u((()=>{s?(m(),s.on("players",m)):d.push("/")})),i((()=>{null==s||s.off("players",m)})),{addBot:()=>{const t=f();s.addPlayer({selfId:t,ownerId:s.player.selfId,data:{skin:"ame",name:"bot",ready:!0}})},kickBot:t=>{s.removePlayer(t)},exit:async()=>{await d.push("/"),await s.destroy(),delete t.room},getRoomCode:async()=>{const t=await s.openRoom();await navigator.clipboard.writeText(t),console.log("copy!")},ready:t=>{s.updatePlayerData(s.player.selfId,{ready:t})},players:p,player:c,skinChanger:r(w(s)),fillSlots:y((()=>Math.max(0,4-p.value.length)))}}});const N=["disabled","onClick"],G=["onClick","disabled"],D=["onClick"];$.render=function(t,e,s,l,a,o){const n=d("UnitComponent");return p(),c(k,null,[m("div",{class:_([t.cs.ctn,t.style.ctn])},[m("div",{class:_([t.style.buttonsGroup,t.style.buttonsTop])},[m("div",null,[m("button",{type:"button",onClick:e[0]||(e[0]=(...e)=>t.addBot&&t.addBot(...e)),class:_([t.style.buttonTop,t.style.button])},b(t.$t("pages.room.5952")),3),m("button",{type:"button",class:_([t.style.buttonTop,t.style.button]),onClick:e[1]||(e[1]=(...e)=>t.getRoomCode&&t.getRoomCode(...e))},b(t.$t("pages.room.2605")),3)]),m("div",null,[m("button",{type:"button",onClick:e[2]||(e[2]=(...e)=>t.exit&&t.exit(...e)),class:_([t.style.buttonTop,t.style.button])},b(t.$t("pages.room.4409")),3)])],2),m("div",{class:_([t.style.slotsGroup])},[(p(!0),c(k,null,C(t.players,((e,s)=>(p(),c("div",{class:_([t.style.slotCtn])},[m("button",{disabled:e.ownerId!==t.player.selfId&&e.selfId!==t.player.selfId,type:"button",class:_([t.style.slotImage,{[t.style.slotImage_ready]:e.data.ready}]),style:I(`background: ${["#F7AEF8","#B388EB","#8093F1","#72DDF7"][s%4]}`),onClick:s=>t.skinChanger.open(e.selfId)},[v(n,{skin:e.data.skin,state:"idle"},null,8,["skin"])],14,N),m("div",{class:_([t.style.slotName,{[t.style.slotNameMe]:e.selfId===t.player.selfId}])},b(e.data.name),3),m("button",{type:"button",onClick:s=>t.kickBot(e.selfId),class:_([t.style.slotKick]),disabled:e.ownerId!==t.player.selfId||e.selfId===t.player.selfId},b(t.$t("pages.room.1172")),11,G)],2)))),256)),(p(!0),c(k,null,C(t.fillSlots,(()=>(p(),c("div",{class:_([t.style.slotCtn])},[m("div",{class:_([t.style.slotImage])},null,2),m("div",{class:_([t.style.slotName])},b(t.$t("pages.room.3553")),3)],2)))),256))],2),m("div",{class:_([t.style.buttonsGroup,t.style.buttonsBot])},[t.player.data.ready?(p(),c("button",{key:0,onClick:e[3]||(e[3]=e=>t.ready(!1)),type:"button",class:_([t.style.buttonStart,t.style.button,t.style.buttonStart_ready])},b(t.$t("pages.room.9245")),3)):(p(),c("button",{key:1,onClick:e[4]||(e[4]=e=>t.ready(!0)),type:"button",class:_([t.style.buttonStart,t.style.button])},b(t.$t("pages.room.6109")),3))],2)],2),t.skinChanger.isOpen?(p(),c("div",{key:0,class:_(t.style.popup)},[m("button",{class:_(t.style.popupClose),onClick:e[5]||(e[5]=(...e)=>t.skinChanger.close&&t.skinChanger.close(...e))},null,2),m("div",{class:_(t.style.skinSelectCtn)},[m("div",{class:_(t.style.skinSelectTitle)},b(t.$t("pages.room.9997")),3),m("div",{class:_(t.style.skinSelectItems)},[(p(!0),c(k,null,C(t.skinChanger.values,(e=>(p(),c("div",{class:_(t.style.skinSelectItemCtn)},[m("button",{type:"button",class:_(t.style.skinSelectItem),onClick:s=>t.skinChanger.set(e)},[v(n,{skin:e,state:"idle"},null,8,["skin"])],10,D)],2)))),256))],2)],2)],2)):g("",!0)],64)};export{$ as default};
