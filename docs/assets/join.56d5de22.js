import{_ as e,R as a}from"./request-error.09c7f654.js";import{A as o}from"./index.d4addaa8.js";import{R as r}from"./common.44480256.js";import{d as s,J as m,K as t,L as l,u as n,v as u,O as i,r as f,o as d,E as c,w as v,e as p,t as _}from"./vendor.570f964d.js";var b=s({components:{Form:e},setup(){const e=m(t(o)),s=l(),f=n({values:{name:"",room:""},errors:{name:null,room:null}});return u((()=>{let e=localStorage.getItem("name");f.value.values.name=e||""})),i(f.value.values,(()=>{localStorage.setItem("name",f.value.values.name)})),{form:f,fields:[{name:"name",label:"form.0"},{name:"room",label:"form.1"}],async submit(){var o,m;const{name:t}=f.value.values;if(t)if(t.length>25)f.value.errors.name="form.3";else try{const a=null!=(o=localStorage.getItem("skin"))?o:"ame";null==(m=e.room)||m.destroy(),e.room=new r,e.room.setCurrentPlayerData({skin:a,name:t}),await e.room.joinRoom(f.value.values.room),await s.push("/room")}catch(l){if(!(l instanceof a))throw l;f.value.errors=l.data}else f.value.errors.name="form.2"}}}});var g={ctn:"_ctn_1b45t_1",link:"_link_1b45t_7"};(b.__cssModules={}).cs=g,b.render=function(e,a,o,r,s,m){const t=f("Form");return d(),c(t,{fields:e.fields,modelValue:e.form,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form=a),onFormSubmit:e.submit},{title:v((()=>[p(_(e.$t("pages.join.3082")),1)])),next:v((()=>[p(_(e.$t("pages.join.4228")),1)])),_:1},8,["fields","modelValue","onFormSubmit"])};export{b as default};
