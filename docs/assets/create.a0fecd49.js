import{A as e}from"./index.f9af0182.js";import{R as a}from"./common.44480256.js";import{_ as r,R as o}from"./request-error.c492a4eb.js";import{d as s,J as t,K as m,L as l,u as n,v as u,O as f,r as i,o as c,E as v,w as d,e as p,t as g}from"./vendor.a60aa299.js";var b=s({components:{Form:r},setup(){const r=t(m(e)),s=l(),i=n({values:{name:""},errors:{name:null}});return u((()=>{let e=localStorage.getItem("name");i.value.values.name=e||""})),f(i.value.values,(()=>{localStorage.setItem("name",i.value.values.name)})),{form:i,fields:[{name:"name",label:"form.0"}],async submit(){var e,t;const{name:m}=i.value.values;if(m)if(m.length>25)i.value.errors.name="form.3";else try{const o=null!=(e=localStorage.getItem("skin"))?e:"ame";null==(t=r.room)||t.destroy(),r.room=new a,r.room.setCurrentPlayerData({skin:o,name:m}),await s.push("/room")}catch(l){if(!(l instanceof o))throw l;i.value.errors=l.data}else i.value.errors.name="form.2"}}}});b.render=function(e,a,r,o,s,t){const m=i("Form");return c(),v(m,{fields:e.fields,modelValue:e.form,"onUpdate:modelValue":a[0]||(a[0]=a=>e.form=a),onFormSubmit:e.submit},{title:d((()=>[p(g(e.$t("pages.create.8803")),1)])),next:d((()=>[p(g(e.$t("pages.create.6548")),1)])),_:1},8,["fields","modelValue","onFormSubmit"])};export{b as default};
